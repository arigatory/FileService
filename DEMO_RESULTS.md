# üéØ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è FileService - –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–§–∞–π–ª–æ–≤—ã–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å —Å —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω! –í–æ—Ç –∫—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ:

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–æ–∑–¥–∞–Ω–æ:

### üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:
```
FileService/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ FileService.Domain/          # –î–æ–º–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å
‚îÇ   ‚îú‚îÄ‚îÄ FileService.Application/     # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (MediatR)
‚îÇ   ‚îú‚îÄ‚îÄ FileService.Infrastructure/  # S3 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ FileService.WebApi/          # REST API
‚îÇ   ‚îî‚îÄ‚îÄ FileService.Client/          # –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
‚îú‚îÄ‚îÄ examples/
‚îÇ   ‚îî‚îÄ‚îÄ FileService.ExampleClient/   # –î–µ–º–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ docker-compose.yml              # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ Dockerfile                      # –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
‚îî‚îÄ‚îÄ test-api.sh                     # –ê–≤—Ç–æ—Ç–µ—Å—Ç—ã API
```

### üéØ –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
- **Upload**: `POST /api/files/upload` - –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ ‚Üí –ø–æ–ª—É—á–µ–Ω–∏–µ ID
- **Download**: `GET /api/files/{id}` - —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –ø–æ ID
- **Delete**: `DELETE /api/files/{id}` - —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
- **Info**: `GET /api/files/{id}/info` - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª–∞

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- **Multiple S3**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö S3/MinIO –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
- **Round Robin**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –º–µ–∂–¥—É —Ö—Ä–∞–Ω–∏–ª–∏—â–∞–º–∏
- **Stream Processing**: –§–∞–π–ª—ã –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ –ø–∞–º—è—Ç—å
- **Clean Architecture**: –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ–µ–≤
- **MediatR CQRS**: –ö–æ–º–∞–Ω–¥—ã –∏ –∑–∞–ø—Ä–æ—Å—ã
- **Client Library**: –ì–æ—Ç–æ–≤–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

## üß™ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã:

### 1. **MinIO —Å–µ—Ä–≤–∏—Å—ã** (–∑–∞–ø—É—â–µ–Ω—ã):
```bash
# MinIO 1: localhost:9001 (Console: localhost:9011)
# MinIO 2: localhost:9002 (Console: localhost:9012) 
# Credentials: minioadmin / minioadmin123
```

### 2. **FileService API**:
```bash
# –ó–∞–ø—É—Å–∫
cd src/FileService.WebApi
dotnet run --urls="http://localhost:8080"

# Swagger UI: http://localhost:8080/swagger
```

### 3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ curl**:
```bash
# –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞
curl -X POST "http://localhost:8080/api/files/upload" \
  -F "file=@test-file.txt" \
  -F "tags=demo,test"

# –û—Ç–≤–µ—Ç: {"id":"uuid","originalFileName":"test-file.txt",...}

# –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞
curl "http://localhost:8080/api/files/{FILE_ID}" -o downloaded.txt

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∞–π–ª–µ
curl "http://localhost:8080/api/files/{FILE_ID}/info"

# –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
curl -X DELETE "http://localhost:8080/api/files/{FILE_ID}"
```

### 4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–ª–∏–µ–Ω—Ç—Å–∫—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É**:
```csharp
using FileService.Client;

var client = new FileServiceClient("http://localhost:8080");

// –ó–∞–≥—Ä—É–∑–∫–∞
using var fileStream = File.OpenRead("test.txt");
var result = await client.UploadFileAsync(fileStream, "test.txt", "text/plain");

// –°–∫–∞—á–∏–≤–∞–Ω–∏–µ  
using var downloadStream = await client.GetFileStreamAsync(result.Id);

// –£–¥–∞–ª–µ–Ω–∏–µ
await client.DeleteFileAsync(result.Id);
```

### 5. **–î–µ–º–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**:
```bash
cd examples/FileService.ExampleClient
dotnet run "http://localhost:8080"
```

## üéØ –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

‚úÖ **–ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞**: –ö–ª–∏–µ–Ω—Ç—ã –Ω–µ –∑–Ω–∞—é—Ç –ø—Ä–æ S3, —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ —Å ID  
‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ S3 –∏–Ω—Å—Ç–∞–Ω—Å—ã  
‚úÖ **Stream –æ–±—Ä–∞–±–æ—Ç–∫–∞**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤ –±–µ–∑ –∑–∞–≥—Ä—É–∑–∫–∏ –≤ –ø–∞–º—è—Ç—å  
‚úÖ **Load Balancing**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ–∂–¥—É —Ö—Ä–∞–Ω–∏–ª–∏—â–∞–º–∏  
‚úÖ **Clean Code**: –ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, SOLID –ø—Ä–∏–Ω—Ü–∏–ø—ã  
‚úÖ **Integration Ready**: –ì–æ—Ç–æ–≤–∞—è –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞  
‚úÖ **Production Ready**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥  

## üê≥ Docker –∑–∞–ø—É—Å–∫:
```bash
# –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (MinIO + FileService)
docker-compose up -d

# –¢–µ—Å—Ç—ã
./test-api.sh
```

## üìä –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:

1. **–ó–∞–≥—Ä—É–∑–∫–∞ –∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤** ‚úÖ
2. **–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –º–µ–∂–¥—É S3 –∏–Ω—Å—Ç–∞–Ω—Å–∞–º–∏** ‚úÖ  
3. **–°—Ç—Ä–∏–º–∏–Ω–≥ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤** ‚úÖ
4. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (404, 500)** ‚úÖ
5. **CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ REST API** ‚úÖ
6. **–ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞** ‚úÖ
7. **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª–æ–≤** ‚úÖ
8. **Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è** ‚úÖ

---

**üéâ –§–∞–π–ª–æ–≤—ã–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å, –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ç–∏–ø—ã —Ö—Ä–∞–Ω–∏–ª–∏—â, –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å –ª—é–±—ã–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏ —á–µ—Ä–µ–∑ REST API –∏–ª–∏ –∫–ª–∏–µ–Ω—Ç—Å–∫—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É.